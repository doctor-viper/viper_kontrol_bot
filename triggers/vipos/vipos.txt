OnEveryChatMessage
If 1 {user} != "VipOS_MK3"
 Function "var message = '{message}'; var regex = /vipos/gmi; return { hasVipos: regex.test(message) };"
If 1 {hasVipos} = true
  VipOSSpeak {message}

OnAction VipOSSpeak
Function "var message = '{in1}'; var regex = /thank you/gmi; return { hasThanks: regex.test(message) };"
If 1 {hasThanks} = true
  VipOSThanks
If 1 {hasThanks} = false
  VipOSChat

OnAction VipOSThanks
API GET 'lists\vipos_thanks.txt'
Function "let lines = [api_data].trim().split(/\r\n|\n/);return {lines: lines}"
List Import VipOSThanksSounds [lines]
List Count VipOSThanksSounds
Function 'return {count: {count} / 4}'
Random Number 1 {count}
List Index VipOSThanksSounds "VipOSThanks{number}"
Param Add index 1
List Get VipOSThanksSounds {index}
Variable Set volume {value}
Param Add index 1
List Get VipOSThanksSounds {index}
Variable Set sound {value}
Param Add index 1
List Get VipOSThanksSounds {index}
Variable Set quote {value}
Play {volume} nowait {sound}
Chat Send "|| VIPOS_REPLY( )"
Chat Send "/me {quote}"
SendLametricNotification {quote}
  
OnAction VipOSChat
API GET 'lists\vipos_chat.txt'
Function "let lines = [api_data].trim().split(/\r\n|\n/);return {lines: lines}"
List Import VipOSChatSounds [lines]
List Count VipOSChatSounds
Function 'return {count: {count} / 4}'
Random Number 1 {count}
List Index VipOSChatSounds "VipOSChat{number}"
Param Add index 1
List Get VipOSChatSounds {index}
Variable Set volume {value}
Param Add index 1
List Get VipOSChatSounds {index}
Variable Set sound {value}
Param Add index 1
List Get VipOSChatSounds {index}
Variable Set quote {value}
Play {volume} nowait {sound}
Chat Send "|| VIPOS_REPLY( )"
Chat Send "/me {quote}"
SendLametricNotification {quote}